---
layout: post
title: Canvas练习
---
<style>
h3{
	margin-top: 60px;
	border-top: solid gray;
	padding-top: 20px;
}
</style>
<h3>获取canvas的图片</h3>
<pre>
var drawing = document.getElementById("drawing");
if(drawing.getContext){
	var imgURI = drawing.toDataURL("image/jpg");
	var image = document.createElement("img");
	image.src = imgURI;
	drawing.parentNode.insertBefore(image, drawing.nextSibling);
}
</pre>
<canvas id="drawing" width="200" height="200">
	drawing
</canvas>
<script type="text/javascript">
	(function(){
		var drawing = document.getElementById("drawing");
		if(drawing.getContext){
			var imgURI = drawing.toDataURL("image/jpg");
			var image = document.createElement("img");
			image.src = imgURI;
			drawing.parentNode.insertBefore(image, drawing.nextSibling);
			//document.body.appendChild(image);
		}
	})();
</script>

<h3>填充矩形</h3>
<pre>
var drawing = document.getElementById("rect-drawing");
if(drawing.getContext){
	var context = drawing.getContext("2d");
	context.fillStyle = "red";
	context.fillRect(10,10,50,50);
}
</pre>
<canvas id="rect-drawing" width="200" height="200">
	drawing
</canvas>
<script type="text/javascript">
	(function(){
		var drawing = document.getElementById("rect-drawing");
		if(drawing.getContext){
			var context = drawing.getContext("2d");
			context.fillStyle = "red";
			context.fillRect(10,10,50,50);
		}
	})();
</script>

<h3>描边矩形</h3>
<pre>
var drawing = document.getElementById("rect-stroke-drawing");
if(drawing.getContext){
	var context = drawing.getContext("2d");
	context.strokeStyle = "red";
	context.strokeRect(10,10,50,50);
}
</pre>
<canvas id="rect-stroke-drawing" width="200" height="200">
	drawing
</canvas>
<script type="text/javascript">
	(function(){
		var drawing = document.getElementById("rect-stroke-drawing");
		if(drawing.getContext){
			var context = drawing.getContext("2d");
			context.strokeStyle = "red";
			context.strokeRect(10,10,50,50);
		}
	})();
</script>

<h3>清除矩形</h3>
<pre>
var drawing = document.getElementById("rect-clear-drawing");
if(drawing.getContext){
	var context = drawing.getContext("2d");
	context.fillStyle = "red";
	context.fillRect(10,10,50,50);
	context.clearRect(30,30,20,20);
}
</pre>
<canvas id="rect-clear-drawing" width="200" height="200">
	drawing
</canvas>
<script type="text/javascript">
	(function(){
		var drawing = document.getElementById("rect-clear-drawing");
		if(drawing.getContext){
			var context = drawing.getContext("2d");
			context.fillStyle = "red";
			context.fillRect(10,10,50,50);
			context.clearRect(30,30,20,20);
		}
	})();
</script>

<h3>绘制弧线</h3>
<pre>
var arcStrokeDrawing = document.getElementById("arc-stroke-drawing");
if(arcStrokeDrawing.getContext){
	var context = arcStrokeDrawing.getContext("2d");
	context.beginPath();
	context.strokeStyle = "red";
	context.arc(100, 100, 80, Math.PI * 7 / 6, Math.PI * 11 / 6, false);
	context.stroke();
}
</pre>
<canvas id="arc-stroke-drawing" width="200" height="200">
	drawing
</canvas>
<script type="text/javascript">
	(function(){
		var arcStrokeDrawing = document.getElementById("arc-stroke-drawing");
		if(arcStrokeDrawing.getContext){
			var context = arcStrokeDrawing.getContext("2d");
			context.beginPath();
			context.strokeStyle = "red";
			context.arc(100, 100, 80, Math.PI * 7 / 6, Math.PI * 11 / 6, false);	
			context.stroke();
		}
	})();
</script>

<h3>加两条直线</h3>
<pre>
var arcLineStrokeDrawing = document.getElementById("arc-line-stroke-drawing");
if(arcLineStrokeDrawing.getContext){
	var context = arcLineStrokeDrawing.getContext("2d");
	context.beginPath();
	context.strokeStyle = "red";
	context.moveTo(100, 100);
	context.lineTo(100 - 80 * Math.cos(Math.PI / 6), 100 - 80 * Math.sin(Math.PI / 6));
	context.arc(100, 100, 80, Math.PI * 7 / 6, Math.PI * 11 / 6, false);
	//context.moveTo(100 + 80 * Math.cos(Math.PI / 6), 100 - 80 * Math.sin(Math.PI / 6));
	context.lineTo(100, 100);		
	context.stroke();
}
</pre>
<canvas id="arc-line-stroke-drawing" width="200" height="200">
	drawing
</canvas>
<script type="text/javascript">
	(function(){
		var arcLineStrokeDrawing = document.getElementById("arc-line-stroke-drawing");
		if(arcLineStrokeDrawing.getContext){
			var context = arcLineStrokeDrawing.getContext("2d");
			context.beginPath();
			context.strokeStyle = "red";
			context.moveTo(100, 100);
			context.lineTo(100 - 80 * Math.cos(Math.PI / 6), 100 - 80 * Math.sin(Math.PI / 6));
			context.arc(100, 100, 80, Math.PI * 7 / 6, Math.PI * 11 / 6, false);
			//context.moveTo(100 + 80 * Math.cos(Math.PI / 6), 100 - 80 * Math.sin(Math.PI / 6));
			context.lineTo(100, 100);		
			context.stroke();
		}
	})();
</script>

<h3>通过旋转再多画几条直线</h3>
<pre>
var drawing = document.getElementById("arc-multi-line-stroke-drawing");
if(drawing.getContext){
	var context = drawing.getContext("2d");
	context.beginPath();
	context.strokeStyle = "red";
	context.moveTo(100, 100);
	context.lineTo(100 - 80 * Math.cos(Math.PI / 6), 100 - 80 * Math.sin(Math.PI / 6));
	context.arc(100, 100, 80, Math.PI * 7 / 6, Math.PI * 11 / 6, false);
	//context.moveTo(100 + 80 * Math.cos(Math.PI / 6), 100 - 80 * Math.sin(Math.PI / 6));
	context.lineTo(100, 100);		
	context.stroke();
	
	context.translate(100, 100);
	context.rotate(Math.PI * 1 / 6);
	for(var i = 1; i <= 7; i++){
		context.rotate(Math.PI * 1 / 12);
		context.moveTo(0, 0);
		context.lineTo(-80, 0);
	}
	context.stroke();
}
</pre>
<canvas id="arc-multi-line-stroke-drawing" width="200" height="200">
	drawing
</canvas>
<script type="text/javascript">
	(function(){
		var drawing = document.getElementById("arc-multi-line-stroke-drawing");
		if(drawing.getContext){
			var context = drawing.getContext("2d");
			context.beginPath();
			context.strokeStyle = "red";
			context.moveTo(100, 100);
			context.lineTo(100 - 80 * Math.cos(Math.PI / 6), 100 - 80 * Math.sin(Math.PI / 6));
			context.arc(100, 100, 80, Math.PI * 7 / 6, Math.PI * 11 / 6, false);
			//context.moveTo(100 + 80 * Math.cos(Math.PI / 6), 100 - 80 * Math.sin(Math.PI / 6));
			context.lineTo(100, 100);		
			context.stroke();
			
			context.translate(100, 100);
			context.rotate(Math.PI * 1 / 6);
			for(var i = 1; i <= 7; i++){
				context.rotate(Math.PI * 1 / 12);
				context.moveTo(0, 0);
				context.lineTo(-80, 0);
			}
			context.stroke();
		}
	})();
</script>

<h3>拷贝后旋转缩小</h3>
<pre>
var drawing = document.getElementById("copy-fan-drawing");
if(drawing.getContext){
	var context = drawing.getContext("2d");
	context.beginPath();
	context.strokeStyle = "red";
	context.moveTo(100, 100);
	context.lineTo(100 - 80 * Math.cos(Math.PI / 6), 100 - 80 * Math.sin(Math.PI / 6));
	context.arc(100, 100, 80, Math.PI * 7 / 6, Math.PI * 11 / 6, false);
	//context.moveTo(100 + 80 * Math.cos(Math.PI / 6), 100 - 80 * Math.sin(Math.PI / 6));
	context.lineTo(100, 100);		
	context.stroke();
	
	context.translate(100, 100);
	context.rotate(Math.PI * 1 / 6);
	for(var i = 1; i <= 7; i++){
		context.rotate(Math.PI * 1 / 12);
		context.moveTo(0, 0);
		context.lineTo(-80, 0);
	}
	context.stroke();

	var imgURI = drawing.toDataURL("image/jpg");
	var image = document.createElement("img");
	image.src = imgURI;
	
	context.rotate(Math.PI * 3 / 12);
	context.scale(0.3, 0.3);
	context.translate(-100, -100);
	
	context.drawImage(image, 0, 0);
	
}
</pre>
<canvas id="copy-fan-drawing" width="200" height="200">
	drawing
</canvas>
<script type="text/javascript">
	(function(){
		var drawing = document.getElementById("copy-fan-drawing");
		if(drawing.getContext){
			var context = drawing.getContext("2d");
			context.beginPath();
			context.strokeStyle = "red";
			context.moveTo(100, 100);
			context.lineTo(100 - 80 * Math.cos(Math.PI / 6), 100 - 80 * Math.sin(Math.PI / 6));
			context.arc(100, 100, 80, Math.PI * 7 / 6, Math.PI * 11 / 6, false);
			//context.moveTo(100 + 80 * Math.cos(Math.PI / 6), 100 - 80 * Math.sin(Math.PI / 6));
			context.lineTo(100, 100);		
			context.stroke();
			
			context.translate(100, 100);
			context.rotate(Math.PI * 1 / 6);
			for(var i = 1; i <= 7; i++){
				context.rotate(Math.PI * 1 / 12);
				context.moveTo(0, 0);
				context.lineTo(-80, 0);
			}
			context.stroke();

			var imgURI = drawing.toDataURL("image/jpg");
			var image = document.createElement("img");
			image.src = imgURI;
			
			context.rotate(Math.PI * 3 / 12);
			context.scale(0.3, 0.3);
			context.translate(-100, -100);
			
			context.drawImage(image, 0, 0);
			
		}
	})();
</script>
<p>未完待续，还有文本、图像、阴影、渐变</p>